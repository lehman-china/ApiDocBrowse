<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>HTML5+Canvas-本地压缩+预览图片</title>
</head>
<style>
    body {
        margin: 20px 20%;
        color: #777;
        text-align: center;
    }
</style>
<body>
<h1 class="text-center">HTML5+Canvas-本地压缩+预览图片</h1>
<hr/>
<input type="file"/>
<hr/>
<canvas width=500 height=500>
</canvas>
<!-- javascript
    ================================================== -->
<script src="/common/js/inc/jquery.js" type="text/javascript"></script>
<script src="localResizeIMG.js" type="text/javascript"></script>
<script type="text/javascript">


    $("[type=file]").change(function () {
        var URL = window.URL || window.webkitURL;
        var img = new Image();
        img.src = URL.createObjectURL(this.files[0]);
        console.log( $("[type=file]"),this,this.files[0] );


        img.onload = function () {
            var canvas = $("canvas")[0];
            var ctx = canvas.getContext('2d');

            ctx.drawImage(this, 0,0,100, 100);


            var data = canvas.toDataURL('image/jpeg');
            console.log( data )
        }


    });


    //    $('input:file').localResizeIMG({
    //        width: 100,
    //        success: function ( base64 ) {
    //            var img = new Image();
    //            img.src = base64;
    //            $('body').append(img);
    //            $('body').append( "<b>"+parseInt(base64.length / 1024) + "kb</b>")
    //        }
    //    });
</script>
</body>
</html>